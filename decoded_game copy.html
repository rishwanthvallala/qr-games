<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>Lights Out</title>
    <style>
        body,
        #c,
        #g,
        .l,
        #s {
            display: flex;
            background: #222
        }

        body,
        #c,
        .l {
            align-items: center;
            gap: 10px
        }

        body {
            font: 1em monospace;
            flex-direction: column;
            color: #0f0
        }

        #s {
            padding: 10px;
            color: #0f0;
        }

        #g {
            display: grid;
            gap: 5px
        }

        .l {
            width: 50px;
            height: 50px;
            border: 2px solid #777;
            justify-content: center;
            font-size: 24px
        }

        .n {
            color: #0ff
        }

        .w {
            position: relative;
            width: 60px;
            height: 34px
        }

        .r {
            position: absolute;
            inset: 0;
            background: #ccc;
            border-radius: 34px
        }

        .r:before {
            content: "";
            position: absolute;
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background: #fff;
            border-radius: 50%
        }

        input:checked+.r:before {
            transform: translateX(26px)
        }

        #help {
            color: #888;
            font-style: italic;
            margin-top: 15px;
        }
    </style>
</head>

<body>
    <h1 id="title">Lights Out</h1>
    <div id=c><label class=w><input type=checkbox id=m><span class=r></span></label><span id=b>Solvable</span></div>
    <div id=g></div><button id=s>RESET</button>
    <p id="help">Make all lights the same (all ON or all OFF) to win!</p>
    <script>let d = document, a = 5, e = [], g = id => d.getElementById(id), c = (e, c, t) => e.classList.toggle(c, t), r = Math.random, A = Array, f = (x, y) => (x >= 0 && x < a && y >= 0 && y < a) && (e[x][y] = !e[x][y], l = g(`l-${x}-${y}`), l.textContent = e[x][y] ? 1 : 0, c(l, 'n', e[x][y]), c(l, 'f', !e[x][y])), i = (x, y) => { [f(x, y), f(x - 1, y), f(x + 1, y), f(x, y - 1), f(x, y + 1)]; const b = e.flat(); if (b.every(l => l) || b.every(l => !l)) { g('title').textContent = 'YOU WIN!'; g('c').style.display = 'none'; g('g').style.display = 'none'; g('s').style.display = 'none'; g('help').style.display = 'none'; let btn = d.createElement('button'); btn.textContent = 'PLAY AGAIN'; btn.style.padding = '10px'; btn.style.color = '#0f0'; btn.style.background = '#222'; btn.style.border = '1px solid #0f0'; btn.onclick = () => window.location.reload(); d.body.appendChild(btn); } }, j = k => { let l = g('g'); l.innerHTML = ''; l.style.gridTemplateColumns = `repeat(${a},50px)`; e = [...A(a)].map(() => A(a).fill(0)); e.forEach((_, x) => e.forEach((_, y) => { let h = d.createElement('div'); h.id = `l-${x}-${y}`; h.className = 'l f'; h.textContent = 0; h.onclick = () => i(x, y); l.appendChild(h) })); if (!k) { f(0, 0); } [...A(10)].forEach(() => i(~~(r() * a), ~~(r() * a))); }, u = () => g('b').textContent = g('m').checked ? 'Unsolvable' : 'Solvable'; g('s').onclick = () => (j(!g('m').checked), u()); g('m').onchange = () => (j(!g('m').checked), u()); j(1); </script>
</body>

</html>